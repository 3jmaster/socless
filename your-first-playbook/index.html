



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
        <link rel="canonical" href="https://twilio-labs.github.io/socless/your-first-playbook/">
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.4.3">
    
    
      
        <title>Your First Playbook - SOCless Docs</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.30686662.css">
      
      
    
    
      <script src="../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#introduction" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://twilio-labs.github.io/socless/" title="SOCless Docs" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              SOCless Docs
            </span>
            <span class="md-header-nav__topic">
              
                Your First Playbook
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://twilio-labs.github.io/socless/" title="SOCless Docs" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    SOCless Docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../deploying-socless/" title="Deploying Socless" class="md-nav__link">
      Deploying Socless
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../key-concepts-and-terms/" title="Key Concepts and Terms" class="md-nav__link">
      Key Concepts and Terms
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" checked>
    
    <label class="md-nav__link" for="nav-4">
      Tutorials
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Tutorials
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-1" type="checkbox" id="nav-4-1" checked>
    
    <label class="md-nav__link" for="nav-4-1">
      Getting Started
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-1">
        Getting Started
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../getting-started/" title="Getting Started Tutorial" class="md-nav__link">
      Getting Started Tutorial
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../your-first-integration-geolocating-an-ip/" title="Your First Integration: Geolocating an IP" class="md-nav__link">
      Your First Integration: Geolocating an IP
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../your-second-integration-sending-a-slack-message/" title="Your Second Integration: Sending a Slack Message" class="md-nav__link">
      Your Second Integration: Sending a Slack Message
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
    <a href="./" title="Your First Playbook" class="md-nav__link md-nav__link--active">
      Your First Playbook
    </a>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../your-first-endpoint/" title="Your First Endpoint" class="md-nav__link">
      Your First Endpoint
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../test-your-first-playbook/" title="Test Your First Playbook" class="md-nav__link">
      Test Your First Playbook
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-2" type="checkbox" id="nav-4-2">
    
    <label class="md-nav__link" for="nav-4-2">
      Interacting With Humans via Slack
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-2">
        Interacting With Humans via Slack
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../tutorial-interacting-with-humans-via-slack/" title="Interacting With Humans via Slack" class="md-nav__link">
      Interacting With Humans via Slack
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../deploy-socless-slack/" title="Deploy Socless Slack" class="md-nav__link">
      Deploy Socless Slack
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../human-interaction-overview/" title="Human Interaction Overview" class="md-nav__link">
      Human Interaction Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../prompting-a-user-for-confirmation/" title="Prompt a User for Confirmation" class="md-nav__link">
      Prompt a User for Confirmation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../making-choices-in-playbooks/" title="Making Choices in Playbooks" class="md-nav__link">
      Making Choices in Playbooks
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../collect-information-using-a-slack-dialog/" title="Collect Information Using a Slack Dialog" class="md-nav__link">
      Collect Information Using a Slack Dialog
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Reference Documentation
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Reference Documentation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../socless-and-serverless/" title="Socless & Serverless" class="md-nav__link">
      Socless & Serverless
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../parameter-references-and-template-variables/" title="Parameter References & Template Variables" class="md-nav__link">
      Parameter References & Template Variables
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../human-interaction-architecture/" title="Human Interaction Architecture" class="md-nav__link">
      Human Interaction Architecture
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../state-management-in-socless/" title="State Management in SOCless" class="md-nav__link">
      State Management in SOCless
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../socless-vs-stock-stepfunctions/" title="SOCless vs Stock AWS Step Functions" class="md-nav__link">
      SOCless vs Stock AWS Step Functions
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      SOCless Betterments List
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        SOCless Betterments List
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../betterments-list/" title="Betterment List Overview" class="md-nav__link">
      Betterment List Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../betterment-template/" title="Betterment Template" class="md-nav__link">
      Betterment Template
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../faqs/" title="FAQs" class="md-nav__link">
      FAQs
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../about/" title="About SOCless" class="md-nav__link">
      About SOCless
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="introduction">Introduction</h1>
<p>Socless Playbooks are simply JSON objects that describe the actions to take and resources to use to automate a response plan.
On deployment, the JSON objects are converted to State Machines that can be executed by the <a href="https://docs.aws.amazon.com/step-functions/latest/dg/welcome.html">AWS Step Functions</a> service. As such, the JSON objects are written according to the AWS States Language specification <a href="../socless-vs-stock-stepfunctions/">but with some slight differences</a></p>
<p>The basic, bare-bones structure for any Socless Playbook JSON object is shown below:</p>
<pre><code>{
    &quot;Playbook&quot;: &quot;&quot;,
    &quot;Comment&quot;: &quot;&quot;,
    &quot;StartAt&quot;: &quot;&quot;,
    &quot;States&quot;: {

    }
}
</code></pre>

<p>It consists of the following top-level fields:
- Playbook: (required) UpperCamelCase name of the playbook. eg. InvestigateLogin
- Comment: (optional) Human readable description of the playbook
- StartAt: (required) The starting state of the playbook
- States: (required) A description of all the states in the playbook and their relationships to each other i.e. transitions. Currently, states should be named using the Upper_Case notation e.g Send_Slack_Message</p>
<p>In this tutorial, we'll be implementing the <code>InvestigateLogin</code> playbook we discussed in the overview for this tutorial. Our Playbook will be triggered by the alert below</p>
<pre><code>{
 &quot;alert_name&quot;: &quot;Anomalous Login IP Detected&quot;,
 &quot;details&quot;: [{&quot;username&quot;: &quot;bruce.wayne&quot;, &quot;ip&quot;: &quot;113.63.125.3&quot;}],
 &quot;response_plan&quot;: &quot;InvestigateLogin&quot;
}
</code></pre>

<p>It will respond by taking the following steps:
- Geolocate the <code>ip</code> using our GeoIP integration
- Use our SendMessage integration to post a notifiction of the login activity + geo ip information to our #bat-signals channel</p>
<p>Let's start the tutorial by setting up our playbooks development environment</p>
<h1 id="setting-up">Setting Up</h1>
<h2 id="clone-playbooks-template">Clone Playbooks Template</h2>
<p>To begin, clone and set up the <code>socless-playbooks-template</code> into your high-level project directory by running the commands below</p>
<pre><code>git clone git@github.com:twilio/socless-playbooks-template.git socless-playbooks
cd socless-playbooks
./setup
</code></pre>

<p>The resulting <code>socless-playbooks</code> directory is a Serverless framework application that will serve as the deployment stack for ALL your Socless Playbooks going forward.</p>
<p>Within the <code>socless-playbooks</code> directory, create a folder named <code>playbooks</code>. This folder is where all your Playbooks will be written.</p>
<h2 id="reference-integration-arns-in-our-playbook-stack">Reference Integration ARNs in our Playbook stack</h2>
<p>To complete the setup for our Playbooks stack, let's create references to the ARNs of the Lambda Integrations we deployed in the last tutorial so we can use those Integrations in the playbook we'll create.</p>
<p>Open the serverless.yml file. The <code>custom</code> section currently looks like this</p>
<pre><code>custom:
  statesRole: ${{cf:socless-${{self:provider.stage}}.StatesExecutionRoleArn}}
  socless:
    CreateEvents: ${{cf:socless-${{self:provider.stage}}.CreateEvents}}
    MergeParallelOutput: ${{cf:socless-${{self:provider.stage}}.MergeParallelOutput}}
    Counter: ${{cf:socless-${{self:provider.stage}}.Counter}}
    AwaitMessageResponseActivity: ${{cf:socless-${{self:provider.stage}}.AwaitMessageResponseActivity}}
    SetInvestigationStatus: ${{cf:socless-${{self:provider.stage}}.SetInvestigationStatus}}
    QueryCustomMapping: ${{cf:socless-${{self:provider.stage}}.QueryCustomMapping}}
    AddCustomMapping: ${{cf:socless-${{self:provider.stage}}.AddCustomMapping}}
    CacheResults: ${{cf:socless-${{self:provider.stage}}.CacheResults}}
</code></pre>

<p>Underneath the <code>socless</code> key are references to the ARNs of the Lambda Integrations that Socless' core infrastructure ships with by default. These references will allow us use the ARNs of these Lambda integrations in our Socless playbooks.</p>
<p>Whenever you need to use an integration in a Socless playbook, you'll need to ensure that the ARN of the Lambda Integration is referenced here. The current convention for referencing Lambda ARNs in your playbook stack is to nest the Integration names under their relevant "product" stack in the <code>custom</code> section of the serverless.yml file. That is</p>
<pre><code>custom:
    product:
        Integration: ${{cf:socless-product-${{self:provider.stage}}.Integration}}
</code></pre>

<p>For our tutorial, we have two integrations (GeoIP &amp; SendMessage) that are currently deployed in our tutorial "product" stack. Reference their ARNs in our Playbook stack by adding the below code one-indentation level under our <code>custom</code> field (i.e. on the same level as the <code>socless</code> field):</p>
<pre><code>tutorial:
    GeoIP: ${{cf:socless-tutorial-${{self:provider.stage}}.GeoIP}}
    SendMessage: ${{cf:socless-tutorial-${{self:provider.stage}}.SendMessage}}
</code></pre>

<p>We will now be able to reference the <code>GeoIP</code> and <code>SendMessage</code> Integrations in our Playbook using the variables <code>${{self:custom.tutorial.GeoIP}}</code> and <code>${{self:custom.tutorial.SendMessage}}</code> respectively.</p>
<p>The references rely on <a href="https://serverless.com/framework/docs/providers/aws/guide/variables/">The Serverless Frameworks' Variable System</a>. Be sure to review that documentation to understand how it works.</p>
<h1 id="coding-the-playbook">Coding The Playbook</h1>
<h2 id="laying-out-basic-structure">Laying out Basic Structure</h2>
<p>Our tutorial playbook will be called <code>InvestigateLogin</code>. In our <code>playbooks</code> directory, create a folder called <code>investigate_login</code>. In the <code>investigate_login</code> folder, create a file named <code>playbook.json</code>. This file is where our playbook's implementation will live. It must be called <code>playbook.json</code>.</p>
<p>Open the playbook.json file in your favorite text editor and layout the basic structure of our playbook as shown below:</p>
<pre><code>{
    &quot;Playbook&quot;: &quot;InvestigateLogin&quot;,
    &quot;Comment&quot;: &quot;Playbook to investigate a login&quot;,
    &quot;StartAt&quot;: &quot;Geolocate_IP&quot;,
    &quot;States&quot;: {

    }
}
</code></pre>

<p>This defines a playbook called <code>InvestigateLogin</code> that starts at a state called <code>Geolocate_IP</code>. Let's configure that <code>Geolocate_IP</code> state in the <code>States</code> object.</p>
<h2 id="configuring-the-geolocate_ip-state">Configuring the Geolocate_IP state</h2>
<p>Our <code>Geolocate_IP</code> state will be a Task state that makes use of our GeoIP integration. Courtesy of AWS Step Functions, Socless playbooks support multiple types of states that all serve different purposes in automating a workflow. Task states are primarily used to execute actions in a playbook. Start the definition for our Geolocate_IP state by updating your playbook.json to match the code shown below</p>
<pre><code>{
    &quot;Playbook&quot;: &quot;InvestigateLogin&quot;,
    &quot;Comment&quot;: &quot;Playbook to investigate a login&quot;,
    &quot;StartAt&quot;: &quot;Geolocate_IP&quot;,
    &quot;States&quot;: {
        &quot;Geolocate_IP&quot;: {

        }

    }
}
</code></pre>

<p>The update starts the definition for our <code>Geolocate_IP</code> state. Note that the current convention for naming states in Socless is to use <code>Upper_Case_Underscore_Separated</code> notation.</p>
<p>A bare-bones configuration for a Task state requires the below field:</p>
<ul>
<li><code>Type</code>: The state type. For Task states, this must be set to <code>Task</code></li>
<li><code>Resource</code>: The URI for the resource the state uses to execute its action. For Lambda Integrations, this is the ARN of the Lambda function for the Integration. Since we'll be using the GeoIP Integration, we'll specify its ARN using the <code>${{self:custom.tutorial.GeoIP}}</code> variable we configured in our serverless.yml file.</li>
<li><code>Parameters</code>: An object with a key-value mapping of all the parameters an Integration needs to complete its action. As explained in the <a href="../parameter-references-and-template-variables/">Parameter References &amp; Template Variables</a> documentation, there are many ways to pass parameters to Integrations depending on where the information lives. The IP address we want to geolocate in our playbook is contained in the event payload sent to our Playbook and can be referenced using the parameter <code>$.artifacts.event.details.ip</code>. Since our GeoIP integration requires an <code>ip</code>, we'll pass it the IP using the configuration <code>{"ip": "$.artifacts.event.details.ip"}</code></li>
<li>A transition configuration, either <code>Next</code> if we're transitioning to another state, or <code>End</code> if the state being configured is the final state of the playbook. Our GeoIP state will transition to "Notify_Bat_Signals_Channel" once it completes its execution, so we'll configure a <code>Next</code> transition</li>
</ul>
<p>The full configuration of our Geolocate_IP state is shown below.</p>
<pre><code>{
    &quot;Playbook&quot;: &quot;InvestigateLogin&quot;,
    &quot;Comment&quot;: &quot;Playbook to investigate a login&quot;,
    &quot;StartAt&quot;: &quot;Geolocate_IP&quot;,
    &quot;States&quot;: {
        &quot;Geolocate_IP&quot;: {
            &quot;Type&quot;: &quot;Task&quot;,
            &quot;Resource&quot;: &quot;${{self:custom.tutorial.GeoIP}}&quot;,
            &quot;Parameters&quot;: {
                &quot;ip&quot;: &quot;$.artifacts.event.details.ip&quot;,
            },
            &quot;Next&quot;: &quot;Notify_Bat_Signals_Channel&quot;
        }
    }
}
</code></pre>

<p>The GeoIP Integration used by this state returns <code>country</code>, <code>latitude</code> and <code>longitude</code>. These values will be accessible by subsequent integrations using either Parameter references in the format <code>$.results.Geolocate_IP.*</code> or Template variables in the format <code>{context.results.Geolocate_IP.*}</code> .</p>
<h2 id="configuring-the-notify_bat_signals_channel-state">Configuring the <code>Notify_Bat_Signals_Channel</code> state</h2>
<p>Next, let's configure our <code>Notify_Bat_Signals_Channel</code> state. This state will also be a Task state. It'll use our SendMessage integration to send a message to our #bat-signals Slack channel. The message will read "<code>{username}</code> just logged in from <code>{latitude}, {longitude}</code>". Finally, our state will serve as the <code>End</code> state for our playbook.</p>
<p>Extend your playbook.json with the configuration for our state as shown below</p>
<pre><code>{
    &quot;Playbook&quot;: &quot;InvestigateLogin&quot;,
    &quot;Comment&quot;: &quot;Playbook to investigate a login&quot;,
    &quot;StartAt&quot;: &quot;Geolocate_IP&quot;,
    &quot;States&quot;: {
        &quot;Geolocate_IP&quot;: {
            &quot;Type&quot;: &quot;Task&quot;,
            &quot;Resource&quot;: &quot;${{self:custom.tutorial.GeoIP}}&quot;,
            &quot;Parameters&quot;: {
                &quot;ip&quot;: &quot;$.artifacts.event.details.ip&quot;
            },
            &quot;Next&quot;: &quot;Notify_Bat_Signals_Channel&quot;
        },
        &quot;Notify_Bat_Signals_Channel&quot;: {
            &quot;Type&quot;: &quot;Task&quot;,
            &quot;Resource&quot;: &quot;${{self:custom.tutorial.SendMessage}}&quot;,
            &quot;Parameters&quot;: {
                &quot;target&quot;: &quot;bat-signals&quot;,
                &quot;target_type&quot;: &quot;channel&quot;,
                &quot;message_template&quot;: &quot;`{context.artifacts.event.details.username}` logged in from `{context.results.Geolocate_IP.country_name}` at coordinates `{context.results.Geolocate_IP.latitude}`, `{context.results.Geolocate_IP.longitude}`&quot;
            },
            &quot;End&quot;: true
        }
    }
}
</code></pre>

<p>Voila! our InvestigateLogin playbook is completely written and ready to deploy.</p>
<h1 id="configuring-our-playbook-for-deployment">Configuring our Playbook for Deployment</h1>
<p>Open your serverless.yml file. Add a <code>playbooks</code> sub-section underneath the <code>custom</code> section and list the folder name of the playbook as shown below</p>
<pre><code>playbooks:
    - investigate_login
</code></pre>

<p>Our playbook is no configured for deployment.</p>
<h1 id="deploying-the-playbook">Deploying the Playbook</h1>
<p>To deploy the playbook to our dev environment, execute the below command:</p>
<pre><code>npm run dev
</code></pre>

<h1 id="conclusion">Conclusion</h1>
<p>Head to the AWS Step Functions Console in the AWS Region of your Socless dev environment. You should see the InvestigateLogin Playbook listed there. The easiest way to test our playbook is to send an alert to our Playbook through an Event Endpoint. So let's <a href="../your-first-endpoint/">create your first event endpoint</a></p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../your-second-integration-sending-a-slack-message/" title="Your Second Integration: Sending a Slack Message" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Your Second Integration: Sending a Slack Message
              </span>
            </div>
          </a>
        
        
          <a href="../your-first-endpoint/" title="Your First Endpoint" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Your First Endpoint
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.ac79c3b0.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
    
  </body>
</html>